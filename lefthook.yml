pre-push:
  parallel: true
  commands:
    check-staged-files:
      run: |
        if git diff --cached --exit-code > /dev/null; then
          echo "✅ No staged files found. Push is allowed."
        else
          echo "❌ Error: There are staged files that haven't been committed."
          echo "This usually happens when pre-commit hooks format files but the changes aren't committed."
          echo ""
          echo "Staged files:"
          git diff --cached --name-only
          echo ""
          echo "Please commit these changes before pushing:"
          echo "  git add ."
          echo "  git commit --amend --no-edit"
          echo "  # or create a new commit"
          exit 1
        fi

pre-commit:
  parallel: true
  commands:
    lint:
      glob: "**/*.{js,ts,jsx,tsx,json}"
      run: pnpm ultracite check --no-error-on-unmatched-pattern true {staged_files}
